/**
* jCS4 - jQuery CSS Slide Show
*
* @version: 0.2.1
* @author Edir Pedro
* @website http://hub.edirpedro.com.br/jcs4
* @git https://github.com/edirpedro/jcs4
* @copyright 2015
* @license MIT - http://opensource.org/licenses/MIT
* @preserve
*/
!function(a){"use strict";var b={debug:!1,autoPlay:!0,pauseOnHover:!0,animationClass:"animated",touchEnabled:!0,swipeThreshold:100,swipeInvert:!1,slide:".jcs4-slide",slideDuration:5e3,slideToStart:0,slideWidth:0,slideHeight:0,slidePreload:1,autoPages:!0,controlPrevious:".jcs4-prev",controlNext:".jcs4-next",controlPages:".jcs4-pages",onPrevious:function(a,b){},onNext:function(a,b){},onChange:function(a,b){},onLoad:function(){}};a.fn.jCS4=function(c){if(0===this.length)return this;if(this.length>1)return this.each(function(){a(this).jCS4(c)}),this;var d=this,e=function(){if(d.settings=a.extend({},b,c),d.original=d.find(d.settings.slide).clone(),d.find(d.settings.slide).each(function(b){a(this).attr("data-index",b)}),d.slides=d.find(d.settings.slide).clone(),d.viewport=d.find(".jcs4-viewport"),d.viewport.html(""),d.settings.slideWidth>0&&d.settings.slideHeight>0){var e='<style>.jcs4-viewport { max-height: $height$px; } .jcs4-viewport:before { display: block; content: ""; width: 100%; padding-top: $ratio$%; }</style>';e=e.replace("$height$",d.settings.slideHeight),e=e.replace("$ratio$",d.settings.slideHeight/d.settings.slideWidth*100),a("head").append(e)}if(p("animation")){var g="webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart";d.slides.find("[data-effect]").each(function(){var b=a(this);b.addClass(d.settings.animationClass+" animationHidden "+b.attr("data-effect"));var c=[],e=b.attr("data-delay");"string"==typeof e&&c.push(o("animation-delay",e));var f=b.attr("data-direction");"string"==typeof f&&c.push(o("animation-direction",f));var h=b.attr("data-duration");"string"==typeof h&&c.push(o("animation-duration",h));var i=b.attr("data-iteration-count");"string"==typeof i&&c.push(o("animation-iteration-count",i));var j=b.attr("data-timing-function");"string"==typeof j&&c.push(o("animation-timing-function",j)),b.attr("style",c.join(" ")),b.one(g,function(){a(this).removeClass("animationHidden")})})}else d.slides.addClass("justFadeIn");if(d.settings.autoPages){var k=d.find(d.settings.controlPages);a.each(d.slides,function(a){k.append("<a>"+(a+1)+"</a>")})}d.find(d.settings.controlPrevious).on("click",f),d.find(d.settings.controlNext).on("click",h),d.find(d.settings.controlPages).find("a").each(function(b){a(this).attr("data-index",b).on("click",j)}),d.find(".jcs4-controls").hide(),d.queue={front:d.settings.slideToStart,back:d.settings.slideToStart},d.timer=new m(d,i,d.settings.slideDuration),d.hover=!1,d.settings.pauseOnHover&&a(d).hover(function(){d.hover=!0,d.timer.pause()},function(){d.hover=!1,d.timer.start()}),r("Initialized",d),d.settings.onLoad(),d.viewport.append('<div class="jcs4-slide jcs4-loading">'),q(d.slides.filter(":lt("+d.settings.slidePreload+")"),function(){r("Preloaded",d.settings.slidePreload),d.settings.touchEnabled&&n(),d.find(".jcs4-controls").show(),l(d.settings.slideToStart)})},f=function(a){a.preventDefault(),g()},g=function(){var a=d.slides.length-1;d.queue.front>0&&(a=parseInt(d.queue.front)-1),r("Function controlPrevious",a,d.queue.front),l(a),d.settings.onPrevious(d.queue.front,d.queue.back)},h=function(a){a.preventDefault(),i()},i=function(){var a=0;d.queue.front<d.slides.length-1&&(a=parseInt(d.queue.front)+1),r("Function controlNext",a,d.queue.front),l(a),d.settings.onNext(d.queue.front,d.queue.back)},j=function(b){b.preventDefault();var c=a(b.target).attr("data-index");c!=d.queue.front&&(r("Function clickPages",c),l(c))},k=function(){d.find(d.settings.controlPages).find("a").removeClass("active").filter("[data-index="+d.queue.front+"]").addClass("active")},l=function(b){d.timer.stop();var c=d.viewport.find(d.settings.slide);2==c.length&&a(c).eq(0).remove();var e=a(d.slides[b]).clone(!0);d.viewport.append(e),d.viewport.find(".justFadeIn:last").hide().fadeIn(),d.queue.back=d.queue.front,d.queue.front=b,r("Function goToSlide",b),d.settings.onChange(d.queue.front,d.queue.back),k(),d.timer.start()},m=function(a,b,c){var d,e,f=c;this.start=function(){a.settings.autoPlay===!1||a.hover||(e=new Date,d=setTimeout(b,f),r("Timer Start",f))},this.pause=function(){clearTimeout(d),f-=new Date-e,r("Timer Pause",f)},this.stop=function(){clearTimeout(d),f=c,r("Timer Stop",c)}},n=function(){d.touch={},d.on("touchstart",function(a){d.touch.startX=a.originalEvent.touches[0].pageX}).on("touchmove",function(a){d.touch.endX=a.originalEvent.touches[0].pageX}).on("touchend",function(a){var b=d.touch.startX,c=d.touch.endX,e=Math.abs(b-c);e>=d.settings.swipeThreshold&&(d.settings.swipeInvert?b>c?g():i():b>c?i():g())})},o=function(a,b){var c=document.createElement("div").style,d=["-ms-","-o-","-moz-","-webkit-"];if(""==c[a])return a+": "+b+";";for(var e in d){var f=d[e]+a;if(""==c[f])return f+": "+b+";"}},p=function(a){if("object"==typeof a){for(var b in a)if(p(a[b])===!1)return!1;return!0}var c=document.createElement("div").style,d=["-ms-","-o-","-moz-","-webkit-"];if(""==c[a])return!0;for(var e in d){var f=d[e]+a;if(""==c[f])return!0}return!1},q=function(b,c){var d=b.find("img").length;if(0==d)return void c();var e=0;b.find("img").each(function(){a(this).one("load",function(){++e==d&&c()}).each(function(){this.complete&&a(this).load()})})},r=function(){d.settings.debug&&console.log(Array.prototype.slice.call(arguments))};return d.goToPrevious=function(){r("Public goToPrevious",index),g()},d.goToNext=function(){r("Public goToNext"),i()},d.goToSlide=function(a){r("Public goToSlide",a),l(a)},d.getCurrentSlide=function(){return d.queue.front},d.getBackSlide=function(){return d.queue.back},d.getSlideCount=function(){return d.slides.length},d.destroy=function(){r("Public destroy"),d.off("touchstart touchmove touchend"),d.viewport.html(d.original),d.find(d.settings.controlPrevious).off("click"),d.find(d.settings.controlNext).off("click"),d.settings.autoPages&&d.find(d.settings.controlPages).html(""),d.queue={}},d.reload=function(a){r("Public reload"),void 0!=a&&(c=a),d.destroy(),e()},e(),this}}(jQuery);