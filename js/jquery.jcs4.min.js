/**
* jCS4 - jQuery CSS Slide Show
*
* @version: 0.1.0
* @author Edir Pedro
* @website http://hub.edirpedro.com.br/jCS4
* @copyright 2015
* @license MIT - http://opensource.org/licenses/MIT
*/

!function(t){"use strict";var e={debug:!1,autoPlay:!0,pauseOnHover:!0,animationClass:"animated",cssSuports:"transform animation",touchEnabled:!0,swipeThreshold:100,swipeInvert:!1,slide:".jcs4-slide",slideDuration:5e3,slideToStart:0,slideWidth:0,slideHeight:0,autoPages:!0,controlPrevious:".jcs4-prev",controlNext:".jcs4-next",controlPages:".jcs4-pages",onPrevious:function(){},onNext:function(){},onChange:function(){},onLoad:function(){}};t.fn.jCS4=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){t(this).jCS4(n)}),this;var i=this,o=function(){if(i.settings=t.extend({},e,n),v(i.settings.cssSuports.split(" "))||i.addClass("jcs4-fallback"),i.original=i.find(i.settings.slide).clone(),i.find(i.settings.slide).each(function(e){t(this).attr("data-index",e)}),i.slides=i.find(i.settings.slide).clone(),i.viewport=i.find(".jcs4-viewport"),i.viewport.html(""),i.settings.slideWidth>0&&i.settings.slideHeight>0){var o='<style>.jcs4-viewport { max-height: $height$px; } .jcs4-viewport:before { display: block; content: ""; width: 100%; padding-top: $ratio$%; }</style>';o=o.replace("$height$",i.settings.slideHeight),o=o.replace("$ratio$",i.settings.slideHeight/i.settings.slideWidth*100),t("head").append(o)}if(v("animation")){var a="webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart";i.slides.find("[data-effect]").each(function(){var e=t(this);e.addClass(i.settings.animationClass+" animationHidden "+e.attr("data-effect"));var n=[],o=e.attr("data-delay");"string"==typeof o&&n.push(h("animation-delay",o));var s=e.attr("data-direction");"string"==typeof s&&n.push(h("animation-direction",s));var r=e.attr("data-duration");"string"==typeof r&&n.push(h("animation-duration",r));var u=e.attr("data-iteration-count");"string"==typeof u&&n.push(h("animation-iteration-count",u));var c=e.attr("data-timing-function");"string"==typeof c&&n.push(h("animation-timing-function",c)),e.attr("style",n.join(" ")),e.one(a,function(){t(this).removeClass("animationHidden")})})}else i.slides.addClass("justFadeIn");if(i.settings.autoPages){var d=i.find(i.settings.controlPages);t.each(i.slides,function(t){d.append("<a>"+(t+1)+"</a>")})}i.find(i.settings.controlPrevious).on("click",s),i.find(i.settings.controlNext).on("click",r),i.find(i.settings.controlPages).find("a").each(function(e){t(this).attr("data-index",e).on("click",c)}),i.queue={front:i.settings.slideToStart,back:i.settings.slideToStart},i.timer=new f(i,u,i.settings.slideDuration),i.hover=!1,i.settings.pauseOnHover&&t(i).hover(function(){i.hover=!0,i.timer.pause()},function(){i.hover=!1,i.timer.start()}),i.settings.touchEnabled&&g(),p("Initialized",i),i.settings.onLoad(),l(i.settings.slideToStart)},s=function(t){t.preventDefault(),a()},a=function(){var t=i.slides.length-1;i.queue.front>0&&(t=parseInt(i.queue.front)-1),p("Function controlPrevious",t,i.queue.front),i.settings.onPrevious(t,i.queue.front),l(t)},r=function(t){t.preventDefault(),u()},u=function(){var t=0;i.queue.front<i.slides.length-1&&(t=parseInt(i.queue.front)+1),p("Function controlNext",t,i.queue.front),i.settings.onNext(t,i.queue.front),l(t)},c=function(e){e.preventDefault();var n=t(e.target).attr("data-index");n!=i.queue.front&&(p("Function clickPages",n),l(n))},d=function(){i.find(i.settings.controlPages).find("a").removeClass("active").filter("[data-index="+i.queue.front+"]").addClass("active")},l=function(e){i.timer.stop();var n=i.viewport.find(i.settings.slide);2==n.length&&t(n).eq(0).remove();var o=t(i.slides[e]).clone(!0);i.viewport.append(o),i.viewport.find(".justFadeIn:last").hide().fadeIn(),i.queue.back=i.queue.front,i.queue.front=e,p("Function goToSlide",e),i.settings.onChange(i.queue.front,i.queue.back),d(),i.timer.start()},f=function(t,e,n){var i,o,s=n;this.start=function(){t.settings.autoPlay===!1||t.hover||(o=new Date,i=setTimeout(e,s),p("Timer Start",s))},this.pause=function(){clearTimeout(i),s-=new Date-o,p("Timer Pause",s)},this.stop=function(){clearTimeout(i),s=n,p("Timer Stop",n)}},g=function(){i.touch={},i.on("touchstart",function(t){i.touch.startX=t.originalEvent.touches[0].pageX}).on("touchmove",function(t){i.touch.endX=t.originalEvent.touches[0].pageX}).on("touchend",function(){var t=i.touch.startX,e=i.touch.endX,n=Math.abs(t-e);n>=i.settings.swipeThreshold&&(i.settings.swipeInvert?t>e?a():u():t>e?u():a())})},h=function(t,e){var n=document.createElement("div").style,i=["-ms-","-o-","-moz-","-webkit-"];if(""==n[t])return t+": "+e+";";for(var o in i){var s=i[o]+t;if(""==n[s])return s+": "+e+";"}},v=function(t){if("object"==typeof t){for(var e in t)if(v(t[e])===!1)return!1;return!0}var n=document.createElement("div").style,i=["-ms-","-o-","-moz-","-webkit-"];if(""==n[t])return!0;for(var o in i){var s=i[o]+t;if(""==n[s])return!0}return!1},p=function(){i.settings.debug&&console.log(Array.prototype.slice.call(arguments))};return i.goToPrevious=function(){p("Public goToPrevious",index),a()},i.goToNext=function(){p("Public goToNext"),u()},i.goToSlide=function(t){p("Public goToSlide",t),l(t)},i.getCurrentSlide=function(){return i.queue.front},i.getBackSlide=function(){return i.queue.back},i.getSlideCount=function(){return i.slides.length},i.destroy=function(){p("Public destroy"),i.off("touchstart touchmove touchend"),i.viewport.html(i.original),i.find(i.settings.controlPrevious).off("click"),i.find(i.settings.controlNext).off("click"),i.settings.autoPages&&i.find(i.settings.controlPages).html(""),i.queue={}},i.reload=function(t){p("Public reload"),void 0!=t&&(n=t),i.destroy(),o()},o(),this}}(jQuery);